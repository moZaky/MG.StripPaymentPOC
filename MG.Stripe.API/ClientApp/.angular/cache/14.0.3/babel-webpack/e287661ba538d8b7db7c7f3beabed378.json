{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/mohammed.elkassed/source/repos/StripPaymentPOC/MG.Stripe.API/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { loadStripe } from '@stripe/stripe-js';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class OrderComponent {\n  constructor(http) {\n    this.http = http;\n    this._baseUrl = window.location.origin;\n    this.order = {\n      ProductApiId: \"price_1Nchq2IPIiF5QVRNaJ3CHrRG\",\n      Quantity: 3\n    };\n  }\n\n  pay() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.stripePromise = loadStripe(environment.stripe_pk);\n      const stripe = yield _this.stripePromise;\n\n      _this._createOrder(_this.order).subscribe(response => {\n        stripe === null || stripe === void 0 ? void 0 : stripe.redirectToCheckout({\n          sessionId: response\n        });\n      });\n    })();\n  }\n\n  _createOrder(order) {\n    return this.http.post(`${this._baseUrl}/api/payment/PlaceOrder`, order);\n  }\n\n}\n\nOrderComponent.ɵfac = function OrderComponent_Factory(t) {\n  return new (t || OrderComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n};\n\nOrderComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: OrderComponent,\n  selectors: [[\"app-order\"]],\n  decls: 11,\n  vars: 2,\n  consts: [[1, \"button-container\"], [1, \"button\", 3, \"click\"]],\n  template: function OrderComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"p\");\n      i0.ɵɵtext(2, \"Product Id: \");\n      i0.ɵɵelementStart(3, \"b\");\n      i0.ɵɵtext(4);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"p\");\n      i0.ɵɵtext(6, \"Quantity: \");\n      i0.ɵɵelementStart(7, \"b\");\n      i0.ɵɵtext(8);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(9, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function OrderComponent_Template_button_click_9_listener() {\n        return ctx.pay();\n      });\n      i0.ɵɵtext(10, \"Pay Now\");\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(ctx.order.ProductApiId);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(ctx.order.Quantity);\n    }\n  },\n  styles: [\".button-container[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    justify-content: center;\\r\\n    align-items: center;\\r\\n    min-height: 600px;\\r\\n}\\r\\n\\r\\n.button-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\r\\n    font-size: 20px;\\r\\n}\\r\\n\\r\\n.button[_ngcontent-%COMP%] {\\r\\n    border: none;\\r\\n    outline: none;\\r\\n    padding: 20px 50px;\\r\\n    font-size: 30px;\\r\\n    font-weight: bold;\\r\\n    border-radius: 10px;\\r\\n    background: #1f75cb;\\r\\n    color: #fff;\\r\\n    cursor: pointer;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZGVyLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxhQUFhO0lBQ2Isc0JBQXNCO0lBQ3RCLHVCQUF1QjtJQUN2QixtQkFBbUI7SUFDbkIsaUJBQWlCO0FBQ3JCOztBQUVBO0lBQ0ksZUFBZTtBQUNuQjs7QUFFQTtJQUNJLFlBQVk7SUFDWixhQUFhO0lBQ2Isa0JBQWtCO0lBQ2xCLGVBQWU7SUFDZixpQkFBaUI7SUFDakIsbUJBQW1CO0lBQ25CLG1CQUFtQjtJQUNuQixXQUFXO0lBQ1gsZUFBZTtBQUNuQiIsImZpbGUiOiJvcmRlci5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmJ1dHRvbi1jb250YWluZXIge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICBtaW4taGVpZ2h0OiA2MDBweDtcclxufVxyXG5cclxuLmJ1dHRvbi1jb250YWluZXIgcCB7XHJcbiAgICBmb250LXNpemU6IDIwcHg7XHJcbn1cclxuXHJcbi5idXR0b24ge1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgb3V0bGluZTogbm9uZTtcclxuICAgIHBhZGRpbmc6IDIwcHggNTBweDtcclxuICAgIGZvbnQtc2l6ZTogMzBweDtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgYm9yZGVyLXJhZGl1czogMTBweDtcclxuICAgIGJhY2tncm91bmQ6ICMxZjc1Y2I7XHJcbiAgICBjb2xvcjogI2ZmZjtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxufSJdfQ== */\"]\n});","map":{"version":3,"mappings":";AAEA,SAAiBA,UAAjB,QAAmC,mBAAnC;AAEA,SAASC,WAAT,QAA4B,8BAA5B;;;AAOA,OAAM,MAAOC,cAAP,CAAqB;EASzBC,YAAoBC,IAApB,EAAoC;IAAhB;IARZ,gBAAWC,MAAM,CAACC,QAAP,CAAgBC,MAA3B;IAGR,aAAQ;MACNC,YAAY,EAAE,gCADR;MAENC,QAAQ,EAAE;IAFJ,CAAR;EAKwC;;EAElCC,GAAG;IAAA;;IAAA;MACP,KAAI,CAACC,aAAL,GAAqBX,UAAU,CAACC,WAAW,CAACW,SAAb,CAA/B;MACA,MAAMC,MAAM,SAAS,KAAI,CAACF,aAA1B;;MACA,KAAI,CAACG,YAAL,CAAkB,KAAI,CAACC,KAAvB,EAA8BC,SAA9B,CAAyCC,QAAD,IAAqB;QAC3DJ,MAAM,SAAN,UAAM,WAAN,GAAM,MAAN,SAAM,CAAEK,kBAAR,CAA2B;UAAEC,SAAS,EAAEF;QAAb,CAA3B;MACD,CAFD;IAHO;EAMR;;EAEOH,YAAY,CAACC,KAAD,EAAW;IAC7B,OAAO,KAAKX,IAAL,CAAUgB,IAAV,CAAuB,GAAG,KAAKC,QAAQ,yBAAvC,EAAkEN,KAAlE,CAAP;EACA;;AArBuB;;;mBAAdb,gBAAcoB;AAAA;;;QAAdpB;EAAcqB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCX3BL,+BAA8B,CAA9B,EAA8B,GAA9B;MACOA;MAAYA;MAAGA;MAAsBA;MACxCA;MAAGA;MAAUA;MAAGA;MAAkBA;MAClCA;MAAQA;QAAA,OAASM,SAAT;MAAc,CAAd;MAA+BN;MAAOA;;;;MAF5BA;MAAAA;MACFA;MAAAA","names":["loadStripe","environment","OrderComponent","constructor","http","window","location","origin","ProductApiId","Quantity","pay","stripePromise","stripe_pk","stripe","_createOrder","order","subscribe","response","redirectToCheckout","sessionId","post","_baseUrl","i0","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\mohammed.elkassed\\source\\repos\\StripPaymentPOC\\MG.Stripe.API\\ClientApp\\src\\app\\order\\order.component.ts","C:\\Users\\mohammed.elkassed\\source\\repos\\StripPaymentPOC\\MG.Stripe.API\\ClientApp\\src\\app\\order\\order.component.html"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Component } from '@angular/core';\r\nimport { Stripe, loadStripe } from '@stripe/stripe-js';\r\nimport { Observable } from 'rxjs';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Component({\r\n  selector: 'app-order',\r\n  templateUrl: './order.component.html',\r\n  styleUrls: ['./order.component.css']\r\n})\r\nexport class OrderComponent {\r\n  private _baseUrl = window.location.origin;\r\n  private stripePromise?: Promise<Stripe | null>;\r\n\r\n  order = {\r\n    ProductApiId: \"price_1Nchq2IPIiF5QVRNaJ3CHrRG\",\r\n    Quantity: 3\r\n  }\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  async pay() {\r\n    this.stripePromise = loadStripe(environment.stripe_pk);\r\n    const stripe = await this.stripePromise;\r\n    this._createOrder(this.order).subscribe((response: string) => {\r\n      stripe?.redirectToCheckout({ sessionId: response });\r\n    });\r\n  }\r\n\r\n  private _createOrder(order: any): Observable<string> {\r\n    return this.http.post<string>(`${this._baseUrl}/api/payment/PlaceOrder`, order)\r\n   }\r\n}\r\n","<div class=\"button-container\">\r\n    <p>Product Id: <b>{{order.ProductApiId}}</b></p>\r\n    <p>Quantity: <b>{{order.Quantity}}</b></p>\r\n    <button (click)=\"pay()\" class=\"button\">Pay Now</button>\r\n</div>"]},"metadata":{},"sourceType":"module"}